{% load static %}
<head>
    <meta name = "viewport" content ="width=device-width, initial scale=1.0">
    <title>348713_SOSA</title>
    <link rel = "stylesheet" type = "text/css" href="{% static 'styles/particles.css' %}">
</head>

<body>
    <div id="particles-js"></div>
    <div class = "general-container" >
        <!-- Contenedor 1 -->
        <div class = "title-container">
            <h1>Jugador: Benito Camela</h1>
        </div>

        <div class = "information-player-container">
            <div class="clock">
                <div id="minutes">
                    1
                </div>
                <span>:</span>
                <div id="seconds">
                    30
                </div>

            </div>
        </div>
        <div id="score"></div>
        <div class = "body-game-container">
            <!-- Tablero -->
            <table class="boggle-board">
                {% for row in board %}
                  <tr>
                    {% for cell in row %}
                      <td class="boggle-cell"><button>{{ cell }}</button></td>
                    {% endfor %}
                  </tr>
                {% endfor %}
            </table>
            <script>
                const botones = document.querySelectorAll('.boggle-board button');
                let letrasSeleccionadas = '';
                let seleccionando = false;
                botones.forEach(boton => {
                boton.addEventListener('mousedown', () => {
                    letrasSeleccionadas += boton.innerText;
                    seleccionando = true;
                    boton.classList.add('seleccionado');
                    console.log(letrasSeleccionadas);
                });

                boton.addEventListener('mouseenter', () => {
                    if (seleccionando) {
                    boton.classList.add('seleccionado');
                    letrasSeleccionadas += boton.innerText;
                    console.log(letrasSeleccionadas);
                    }
                });

                boton.addEventListener('mouseup', () => {
                    seleccionando = false;
                    botones.forEach(boton => {
                    boton.classList.remove('seleccionado');
                    });
                    if (letrasSeleccionadas !== '') {
                    
                    fetch('/verificar-existencia/' + letrasSeleccionadas)
                        .then(response => response.json())
                        .then(data => {
                        if (data.existe) {
                            console.log('La cadena existe en el trie');
                        } else {
                            console.log('La cadena no existe en el trie');
                        }
                        })
                        .catch(error => {
                        console.error(error);
                        })
                        .finally(() => {
                        letrasSeleccionadas = '';
                        });
                    }
                });
                });
            </script>
            <!-- Score -->
            <table class = "score">
                <thead>
                  <tr>
                    <th>Nombre</th>
                    <th>Puntuación</th>
                    <th>Fecha de la partida</th>
                    <th>Modo</th>
                    <th>Potenciadores</th>
                  </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>María</td>
                        <td>25</td>
                        <td>15/04/2023</td>
                        <td>Modo fácil</td>
                        <td>Ninguno</td>
                      </tr>
                      
                      <tr>
                        <td>Pedro</td>
                        <td>30</td>
                        <td>12/04/2023</td>
                        <td>Modo difícil</td>
                        <td>Velocidad</td>
                      </tr>
                      
                      <tr>
                        <td>Lucía</td>
                        <td>27</td>
                        <td>10/04/2023</td>
                        <td>Modo normal</td>
                        <td>Escudo, Vida extra</td>
                      </tr>
                </tbody>
            </table>
        </div>
    </div>
    

    <!-- Scripts -->
    <script src="{% static 'js/particles.js' %}"></script>
    <script src="{% static 'js/app.js' %}"></script>
    <script src="https://kit.fontawesome.com/a2e8d0339c.js"></script>
</body>
</html>